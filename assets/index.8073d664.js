import{C as e,d as t,r as a,D as l,c as o,a as n,t as r,b as s,w as i,p as c,e as u,o as d,f as m,v as p,g as v,h as f,i as h,j as g,F as b,k,l as C,m as I,n as w,q as y}from"./vendor.bb1fbec9.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const l=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const r=new URL(e,l);if(self[t].moduleMap[r])return a(self[t].moduleMap[r]);const s=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){n(new Error(`Failed to import: ${e}`)),o(i)},onload(){a(self[t].moduleMap[r]),o(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/ch-spy/assets/");const x=/{"title"[ :]+"([\s\S]*?)"\s*,\s*"file"[ :]+"([^"]*?)"[^}]*},{0,1}/g,M=/\/course\/\d{3,10}?\/lessons/g;function L(e){return e<10?`0${e}`:`${e}`}var E={},$=t({props:{url:String},setup(){const e=a(0),t=a(!1),o=a(!1),n=a(!1),r=a(!1);function s(t){if(t.lengthComputable){var a=Math.floor(t.loaded/t.total*100);e.value=a}else e.value=50}return{progressPersent:e,disabledBtn:t,succeeded:o,failed:n,tryed:r,downloadFile:a=>{r.value=!0,o.value=!1,n.value=!1,t.value=!0,e.value=0;let i=E.basename(a);new l({url:a,process:s,filename:i,timeout:12e4}).then((function(){!function(a){t.value=!1,e.value=0,o.value=!0,n.value=!1,console.log("done",a)}(a)})).catch((function(e){!function(e,a){t.value=!1,o.value=!1,n.value=!0,console.log("err",e,a)}(a,e)}))}}}});const U=i("data-v-ef5c9cbe");c("data-v-ef5c9cbe");const T={class:"download-button"},j={key:0,class:"progress"},S={key:1,class:"meter"};u();const R=U(((e,t,a,l,i,c)=>(d(),o("div",T,[n("button",{disabled:e.disabledBtn,onClick:t[1]||(t[1]=t=>e.downloadFile(e.url))},"Get",8,["disabled"]),0!==e.progressPersent?(d(),o("div",j,r(e.progressPersent),1)):s("",!0),e.tryed?(d(),o("div",S,[n("span",{style:{width:e.succeeded?"100%":e.progressPersent+"%"},class:{failed:e.failed}},null,6)])):s("",!0)]))));function _(e,t,a,l){a=a||document.domain,l=l||"/";let o=new Date;t?o.setDate(o.getDate()+7):o.setDate(o.getDate()-1),document.cookie=`${e}=${t}; expires=${o}; domain=${a}; path=${l}`}function z(e){return(e||"").split(";").map((e=>e.trim())).filter((e=>Boolean)).map((e=>e.split("="))).filter((e=>!!e[0]))}$.render=R,$.__scopeId="data-v-ef5c9cbe";var D=t({setup(){const e=a("CHUNTERS=sn9mlunjt9ka7k55euahoudg56; locale=ru; ch_quiz=dce74e1d9cb6bac3bb2dd9bca41775b4; redirect_after_login=https://coursehunter.net/course/eticheskiy-vzlom-vzlom-veb-prilozheniy; user_ident=67097d78-12b6-4e9b-97d4-6a3611e22a46; accessToken=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImp0aSI6IjRmMWcyM2ExMmFhIn0.eyJpc3MiOiJodHRwczpcL1wvY291cnNlaHVudGVyLm5ldCIsImF1ZCI6Imh0dHBzOlwvXC9jb3Vyc2VodW50ZXIubmV0IiwianRpIjoiNGYxZzIzYTEyYWEiLCJpYXQiOjE1NzM3MjI4NDEsIm5iZiI6MTU3MzcyMjkwMSwiZXhwIjoxNTc0MzI3NjQxLCJ1c2VyX2lkIjoiMzQ0MjIiLCJlX21haWwiOiJtYXh6ejIwMDBAZ21haWwuY29tIn0.EOVzHBofbLJYHjKXJY_g2tXRVzzpoBYFQ3G0iHftGRE");return{cookieInp:e,setCookie:()=>{e.value&&z(e.value).forEach((e=>{console.log("set",e),_(e[0],e[1])}))},clearCookie:()=>{z(document.cookie).forEach((e=>{console.log("get",e),_(e[0],"")})),console.log("Current Cookie",document.cookie)}}}});const J=i("data-v-772af6f1");c("data-v-772af6f1");const B={class:"cookie"};u();const F=J(((e,t,a,l,r,s)=>(d(),o("div",B,[m(n("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.cookieInp=t),placeholder:"Type cookie"},null,512),[[p,e.cookieInp]]),n("button",{onClick:t[2]||(t[2]=(...t)=>e.clearCookie&&e.clearCookie(...t))},"Clear Document Cookie"),n("button",{onClick:t[3]||(t[3]=(...t)=>e.setCookie&&e.setCookie(...t))},"Set Cookie")]))));D.render=F,D.__scopeId="data-v-772af6f1";const V=(e,t)=>`${L(e+1)} - ${t.trim()}`;var H=t({props:["items","title","desc"],components:{DownloadButton:$,CookieSetter:D},setup(e){const t=v((()=>e.items.reduce(((e,t,a)=>e+`${V(a,t.name)}\n`),""))),a=v((()=>e.items.reduce(((e,t,a)=>{let l=h.basename(t.url),o=h.extname(l),n=(V(a,t.name)||"").trim().replace(/[\\\/:\*\?\"\<\>\|]/g,";");return e+(n?`ren "${l}" "${n}${o}" \n`:"\n")}),"chcp 1251\n")));return{itemIndex:e=>"video "+(+e+1),itemName:(e,t,a)=>V(+e,t.name),allText:t,allBatch:a,downloadRename:()=>{f(a.value,"rename.cmd","text/plain")}}}});const N=i("data-v-0742b83c");c("data-v-0742b83c");const O={key:0},G={key:0,class:"main-title"},X={key:0},Y={style:{display:"flex",justifyContent:"flex-end"}},A={class:"container"},P=C(" mp4"),Z=n("summary",null,"Batch rename file",-1),Q=n("span",{class:"rename-node"}," * convert in notepad++ utf8 saved file to ansi for russian names",-1),W=n("summary",null,"All Together",-1);u();const q=N(((e,t,a,l,i,c)=>{const u=g("download-button");return e.items.length?(d(),o("div",O,[e.title?(d(),o("div",G,[e.desc?s("",!0):(d(),o("div",X,r(e.title),1)),n("div",{title:e.title},r(e.desc),9,["title"])])):s("",!0),n("div",Y,[n("button",{onClick:t[1]||(t[1]=(...t)=>e.downloadRename&&e.downloadRename(...t))},"Download rename.cmd")]),n("div",A,[n("ul",null,[(d(!0),o(b,null,k(e.items,((t,a)=>(d(),o("li",{key:a},[n("input",{value:e.itemName(a,t,e.items)},null,8,["value"]),n(u,{url:t.url},null,8,["url"]),n("a",{class:{nolink:!t.url},href:t.url,title:e.itemIndex(a),tabIndex:"-1",target:"blank"},[n("span",null,r(t.duration),1),P],10,["href","title"])])))),128))])]),n("details",null,[Z,n("button",{onClick:t[2]||(t[2]=(...t)=>e.downloadRename&&e.downloadRename(...t))},"Download rename.cmd"),Q,m(n("textarea",{class:"all-rename","onUpdate:modelValue":t[3]||(t[3]=t=>e.allBatch=t),readonly:"",rows:e.items.length+2},null,8,["rows"]),[[p,e.allBatch]])]),n("details",null,[W,m(n("textarea",{class:"all-together","onUpdate:modelValue":t[4]||(t[4]=t=>e.allText=t),readonly:"",rows:e.items.length+1},null,8,["rows"]),[[p,e.allText]])])])):s("",!0)}));H.render=q,H.__scopeId="data-v-0742b83c";var K=t({props:{value:{type:String,default:""}},setup(e,{emit:t}){const l=a(e.value);let o;function n(){t("input","")}return I((()=>e.value),(()=>{l.value=e.value,l.value&&(o&&clearTimeout(o),o=setTimeout((()=>n()),5e3))})),{errorMsg:l,onErrorClear:n}}});const ee=i("data-v-6f91dd00");c("data-v-6f91dd00");const te={key:0,class:"error-msg"};u();const ae=ee(((e,t,a,l,i,c)=>e.errorMsg?(d(),o("div",te,[n("span",null,"Error: "+r(e.errorMsg),1),n("button",{onClick:t[1]||(t[1]=(...t)=>e.onErrorClear&&e.onErrorClear(...t)),tabIndex:"-1"},"Ã—")])):s("",!0)));K.render=ae,K.__scopeId="data-v-6f91dd00";const le="coursehunters-items";var oe=t({name:"app",components:{GeneratedList:H,ErrorMessage:K},setup(){const t=a(""),l=a(""),o=a(""),n=a(""),r=a(""),s=a(""),i=a([]),c=v((()=>!!t.value.match(/^https?:\/\//))),u=v((()=>t.value?c.value?"Fetch":"Parse":"Type")),d=a(""),m=a(!1);async function p(t){const{items:a,title:s,desc:c,source:u}=function(t){let a=e.load(t);const l=a(".hero-title").text(),o=a(".hero-description").text(),n=a(".hero-source").text();let r=[];if(a(".lessons-item").each(((e,t)=>{let l=a("[itemprop=contentUrl]",t).attr("href");if(!l){let e=a("script",t)[0].children[0].data,o=/"contentUrl":\s*"(https:\/\/[^"]+\.mp4)"/.exec(e);o&&(l=o[1])}r.push({title:a(".lessons-title",t).text(),duration:a(".lessons-duration",t).text(),name:a(".lessons-name",t).text(),url:l})})),!r.length){let e=a("script");for(let t of e.toArray())if(!Object.keys(t.attribs).length){let e=t.children[0].data;if(e){let t=[...e.matchAll(x)];t.length&&(r=t.map((e=>({name:e[1],duration:"",title:"??",url:e[2]}))),r=r.filter((e=>!/sample.mp4/.test(e.url))),r.forEach((e=>{let t=e.name.match(/^\d*\) #{0,1}([\.\d]+){0,1}\s*(.*) \| (.*)/);if(t&&(e.name=t[2],e.duration=t[3],t[1])){let a=t[1],l=a.split(".").filter(Boolean);l.length&&(l[0]=L(+l[0]),a=l.join(".")),e.name=`${a} - ${e.name}`}})))}}}return{items:r,title:l,desc:o,source:n}}(t);if(l.value=s,o.value=c,n.value=u,i.value=a,!a.length)try{r.value=function(e){let t=M.exec(e);return t?`https://coursehunter.net${t[0]}`:""}(t)}catch(m){d.value=`Error: ${m}`}}return I((()=>t.value),(()=>{d.value="",c.value&&(t.value?localStorage.setItem("coursehunters-source",t.value):localStorage.removeItem("coursehunters-source"))})),w((()=>{(async()=>{let e=localStorage.getItem("coursehunters-source");e&&(t.value=e);let a=localStorage.getItem(le);a&&(await p(a),m.value=!0)})()})),{inputUrl:t,isTypedUrl:c,errorMsg:d,webpageItems:i,webpageTitle:l,webpageDesc:o,webpageItemsLink:r,webpageItemsJson:s,hasHTML:m,fetchBtnName:u,onFetchDataClick:async()=>{try{let e=t.value;if(e){let t="";if(c.value){let a=await fetch(e);t=await a.text(),localStorage.setItem(le,t),m.value=!0}else t=e,localStorage.setItem(le,t),m.value=!0;await p(t)}else d.value="Type coursehuter.net course URL or paste html content from coursehuter.net"}catch(e){d.value=`Error: ${e}`}},onFetchAxiosItemsClick:()=>{let e=function(e){let t=/([\s\S]+)\s*\|\s*(\d\d:\d\d:\d\d)$/;try{return{items:JSON.parse(e).map((e=>{let a=t.exec(e.title),l=a?a[1]:e.title;return{title:l,duration:a?a[2]:"",url:e.file,name:l}}))}}catch(a){return{error:`Error: ${a}`}}}(s.value);e.error?d.value=`Error: ${e.error}`:i.value=e.items},onClearStorageClick:()=>{t.value="",i.value=[],l.value=""},onClearHTMLClick:()=>{m.value=!1,localStorage.removeItem(le)},onClearErrorMsg:e=>{d.value=e}}}});const ne={id:"app"},re={class:"controls"},se={key:0},ie={class:"controls"};oe.render=function(e,t,a,l,i,c){const u=g("GeneratedList"),v=g("ErrorMessage");return d(),o("div",ne,[n("div",re,[m(n("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.inputUrl=t),placeholder:"URL from coursehunter.net"},null,512),[[p,e.inputUrl]]),n("button",{onClick:t[2]||(t[2]=(...t)=>e.onFetchDataClick&&e.onFetchDataClick(...t))},r(e.fetchBtnName),1),n("button",{onClick:t[3]||(t[3]=(...t)=>e.onClearStorageClick&&e.onClearStorageClick(...t)),title:"Clear fetched data"},"Clear"),e.hasHTML?(d(),o("button",{key:0,onClick:t[4]||(t[4]=(...t)=>e.onClearHTMLClick&&e.onClearHTMLClick(...t)),title:"Clear local storage"},"Clear HTML")):s("",!0)]),e.webpageItemsLink?(d(),o("div",se,[n("div",{style:{display:"flex",margin:"1em .4em 0",fontSize:".9em",padding:".4em 0"}},[n("a",{href:e.webpageItemsLink,target:"_blank"},"Get items:",8,["href"]),m(n("input",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.webpageItemsLink=t),style:{flexGrow:1,border:"none",marginLeft:".4em",outline:"none"},readonly:"",tabIndex:"-1"},null,4),[[p,e.webpageItemsLink]])],4),n("div",ie,[m(n("input",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.webpageItemsJson=t),placeholder:"Paste items from URL above"},null,512),[[p,e.webpageItemsJson]]),e.webpageItemsJson?(d(),o("button",{key:0,onClick:t[7]||(t[7]=(...t)=>e.onFetchAxiosItemsClick&&e.onFetchAxiosItemsClick(...t))},"Parse")):s("",!0)])])):s("",!0),n(u,{items:e.webpageItems,title:e.webpageTitle,desc:e.webpageDesc},null,8,["items","title","desc"]),n(v,{value:e.errorMsg,onInput:e.onClearErrorMsg},null,8,["value","onInput"])])},y(oe).mount("#app");
